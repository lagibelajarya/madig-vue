var Tt={exports:{}};(function(z,St){/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(g){typeof bootstrap=="function"?bootstrap("promise",g):z.exports=g()})(function(){var g=!1;try{throw new Error}catch(t){g=!!t.stack}var W=V(),Q,U=function(){},A=function(){var t={task:void 0,next:null},e=t,n=!1,o=void 0,u=!1,c=[];function f(){for(var p,h;t.next;)t=t.next,p=t.task,t.task=void 0,h=t.domain,h&&(t.domain=void 0,h.enter()),l(p,h);for(;c.length;)p=c.pop(),l(p);n=!1}function l(p,h){try{p()}catch(_){if(u)throw h&&h.exit(),setTimeout(f,0),h&&h.enter(),_;setTimeout(function(){throw _},0)}h&&h.exit()}if(A=function(p){e=e.next={task:p,domain:u&&process.domain,next:null},n||(n=!0,o())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)u=!0,o=function(){process.nextTick(f)};else if(typeof setImmediate=="function")typeof window<"u"?o=setImmediate.bind(window,f):o=function(){setImmediate(f)};else if(typeof MessageChannel<"u"){var s=new MessageChannel;s.port1.onmessage=function(){o=a,s.port1.onmessage=f,f()};var a=function(){s.port2.postMessage(0)};o=function(){setTimeout(f,0),a()}}else o=function(){setTimeout(f,0)};return A.runAfter=function(p){c.push(p),n||(n=!0,o())},A}(),X=Function.call;function w(t){return function(){return X.apply(t,arguments)}}var d=w(Array.prototype.slice),T=w(Array.prototype.reduce||function(t,e){var n=0,o=this.length;if(arguments.length===1)do{if(n in this){e=this[n++];break}if(++n>=o)throw new TypeError}while(1);for(;n<o;n++)n in this&&(e=t(e,this[n],n));return e}),O=w(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),C=w(Array.prototype.map||function(t,e){var n=this,o=[];return T(n,function(u,c,f){o.push(t.call(e,c,f,n))},void 0),o}),N=Object.create||function(t){function e(){}return e.prototype=t,new e},I=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},Y=w(Object.prototype.hasOwnProperty),Z=Object.keys||function(t){var e=[];for(var n in t)Y(t,n)&&e.push(n);return e},tt=w(Object.prototype.toString);function et(t){return t===Object(t)}function nt(t){return tt(t)==="[object StopIteration]"||t instanceof E}var E;typeof ReturnValue<"u"?E=ReturnValue:E=function(t){this.value=t};var rt="From previous event:";function $(t,e){if(g&&e.stack&&typeof t=="object"&&t!==null&&t.stack){for(var n=[],o=e;o;o=o.source)o.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>o.stackCounter)&&(I(t,"__minimumStackCounter__",{value:o.stackCounter,configurable:!0}),n.unshift(o.stack));n.unshift(t.stack);var u=n.join(`
`+rt+`
`),c=ot(u);I(t,"stack",{value:c,configurable:!0})}}function ot(t){for(var e=t.split(`
`),n=[],o=0;o<e.length;++o){var u=e[o];!ut(u)&&!it(u)&&u&&n.push(u)}return n.join(`
`)}function it(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function M(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var o=/.*@(.+):(\d+)$/.exec(t);if(o)return[o[1],Number(o[2])]}function ut(t){var e=M(t);if(!e)return!1;var n=e[0],o=e[1];return n===Q&&o>=W&&o<=xt}function V(){if(!!g)try{throw new Error}catch(o){var t=o.stack.split(`
`),e=t[0].indexOf("@")>0?t[1]:t[2],n=M(e);return n?(Q=n[0],n[1]):void 0}}function ft(t,e,n){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function r(t){return t instanceof i?t:B(t)?ht(t):F(t)}r.resolve=r,r.nextTick=A,r.longStackSupport=!1;var ct=1;typeof process=="object"&&process&&process.env&&process.env.Q_DEBUG&&(r.longStackSupport=!0),r.defer=v;function v(){var t=[],e=[],n,o=N(v.prototype),u=N(i.prototype);if(u.promiseDispatch=function(f,l,s){var a=d(arguments);t?(t.push(a),l==="when"&&s[1]&&e.push(s[1])):r.nextTick(function(){n.promiseDispatch.apply(n,a)})},u.valueOf=function(){if(t)return u;var f=L(n);return j(f)&&(n=f),f},u.inspect=function(){return n?n.inspect():{state:"pending"}},r.longStackSupport&&g)try{throw new Error}catch(f){u.stack=f.stack.substring(f.stack.indexOf(`
`)+1),u.stackCounter=ct++}function c(f){n=f,r.longStackSupport&&g&&(u.source=f),T(t,function(l,s){r.nextTick(function(){f.promiseDispatch.apply(f,s)})},void 0),t=void 0,e=void 0}return o.promise=u,o.resolve=function(f){n||c(r(f))},o.fulfill=function(f){n||c(F(f))},o.reject=function(f){n||c(y(f))},o.notify=function(f){n||T(e,function(l,s){r.nextTick(function(){s(f)})},void 0)},o}v.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(d(arguments,1)):t.resolve(n)}},r.Promise=k,r.promise=k;function k(t){if(typeof t!="function")throw new TypeError("resolver must be a function.");var e=v();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}k.race=q,k.all=x,k.reject=y,k.resolve=r,r.passByCopy=function(t){return t},i.prototype.passByCopy=function(){return this},r.join=function(t,e){return r(t).join(e)},i.prototype.join=function(t){return r([this,t]).spread(function(e,n){if(e===n)return e;throw new Error("Q can't join: not the same: "+e+" "+n)})},r.race=q;function q(t){return k(function(e,n){for(var o=0,u=t.length;o<u;o++)r(t[o]).then(e,n)})}i.prototype.race=function(){return this.then(r.race)},r.makePromise=i;function i(t,e,n){e===void 0&&(e=function(c){return y(new Error("Promise does not support operation: "+c))}),n===void 0&&(n=function(){return{state:"unknown"}});var o=N(i.prototype);if(o.promiseDispatch=function(c,f,l){var s;try{t[f]?s=t[f].apply(o,l):s=e.call(o,f,l)}catch(a){s=y(a)}c&&c(s)},o.inspect=n,n){var u=n();u.state==="rejected"&&(o.exception=u.reason),o.valueOf=function(){var c=n();return c.state==="pending"||c.state==="rejected"?o:c.value}}return o}i.prototype.toString=function(){return"[object Promise]"},i.prototype.then=function(t,e,n){var o=this,u=v(),c=!1;function f(a){try{return typeof t=="function"?t(a):a}catch(p){return y(p)}}function l(a){if(typeof e=="function"){$(a,o);try{return e(a)}catch(p){return y(p)}}return y(a)}function s(a){return typeof n=="function"?n(a):a}return r.nextTick(function(){o.promiseDispatch(function(a){c||(c=!0,u.resolve(f(a)))},"when",[function(a){c||(c=!0,u.resolve(l(a)))}])}),o.promiseDispatch(void 0,"when",[void 0,function(a){var p,h=!1;try{p=s(a)}catch(_){if(h=!0,r.onerror)r.onerror(_);else throw _}h||u.notify(p)}]),u.promise},r.tap=function(t,e){return r(t).tap(e)},i.prototype.tap=function(t){return t=r(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},r.when=m;function m(t,e,n,o){return r(t).then(e,n,o)}i.prototype.thenResolve=function(t){return this.then(function(){return t})},r.thenResolve=function(t,e){return r(t).thenResolve(e)},i.prototype.thenReject=function(t){return this.then(function(){throw t})},r.thenReject=function(t,e){return r(t).thenReject(e)},r.nearer=L;function L(t){if(j(t)){var e=t.inspect();if(e.state==="fulfilled")return e.value}return t}r.isPromise=j;function j(t){return t instanceof i}r.isPromiseAlike=B;function B(t){return et(t)&&typeof t.then=="function"}r.isPending=st;function st(t){return j(t)&&t.inspect().state==="pending"}i.prototype.isPending=function(){return this.inspect().state==="pending"},r.isFulfilled=at;function at(t){return!j(t)||t.inspect().state==="fulfilled"}i.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},r.isRejected=pt;function pt(t){return j(t)&&t.inspect().state==="rejected"}i.prototype.isRejected=function(){return this.inspect().state==="rejected"};var R=[],S=[],P=[],b=!0;function D(){R.length=0,S.length=0,b||(b=!0)}function lt(t,e){!b||(typeof process=="object"&&typeof process.emit=="function"&&r.nextTick.runAfter(function(){O(S,t)!==-1&&(process.emit("unhandledRejection",e,t),P.push(t))}),S.push(t),e&&typeof e.stack<"u"?R.push(e.stack):R.push("(no stack) "+e))}function dt(t){if(!!b){var e=O(S,t);e!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&r.nextTick.runAfter(function(){var n=O(P,t);n!==-1&&(process.emit("rejectionHandled",R[e],t),P.splice(n,1))}),S.splice(e,1),R.splice(e,1))}}r.resetUnhandledRejections=D,r.getUnhandledReasons=function(){return R.slice()},r.stopUnhandledRejectionTracking=function(){D(),b=!1},D(),r.reject=y;function y(t){var e=i({when:function(n){return n&&dt(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return lt(e,t),e}r.fulfill=F;function F(t){return i({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return e==null?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return Z(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function ht(t){var e=v();return r.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}r.master=vt;function vt(t){return i({isDef:function(){}},function(n,o){return G(t,n,o)},function(){return r(t).inspect()})}r.spread=J;function J(t,e,n){return r(t).spread(e,n)}i.prototype.spread=function(t,e){return this.all().then(function(n){return t.apply(void 0,n)},e)},r.async=yt;function yt(t){return function(){function e(c,f){var l;if(typeof StopIteration>"u"){try{l=n[c](f)}catch(s){return y(s)}return l.done?r(l.value):m(l.value,o,u)}else{try{l=n[c](f)}catch(s){return nt(s)?r(s.value):y(s)}return m(l,o,u)}}var n=t.apply(this,arguments),o=e.bind(e,"next"),u=e.bind(e,"throw");return o()}}r.spawn=mt;function mt(t){r.done(r.async(t)())}r.return=gt;function gt(t){throw new E(t)}r.promised=kt;function kt(t){return function(){return J([this,x(arguments)],function(e,n){return t.apply(e,n)})}}r.dispatch=G;function G(t,e,n){return r(t).dispatch(e,n)}i.prototype.dispatch=function(t,e){var n=this,o=v();return r.nextTick(function(){n.promiseDispatch(o.resolve,t,e)}),o.promise},r.get=function(t,e){return r(t).dispatch("get",[e])},i.prototype.get=function(t){return this.dispatch("get",[t])},r.set=function(t,e,n){return r(t).dispatch("set",[e,n])},i.prototype.set=function(t,e){return this.dispatch("set",[t,e])},r.del=r.delete=function(t,e){return r(t).dispatch("delete",[e])},i.prototype.del=i.prototype.delete=function(t){return this.dispatch("delete",[t])},r.mapply=r.post=function(t,e,n){return r(t).dispatch("post",[e,n])},i.prototype.mapply=i.prototype.post=function(t,e){return this.dispatch("post",[t,e])},r.send=r.mcall=r.invoke=function(t,e){return r(t).dispatch("post",[e,d(arguments,2)])},i.prototype.send=i.prototype.mcall=i.prototype.invoke=function(t){return this.dispatch("post",[t,d(arguments,1)])},r.fapply=function(t,e){return r(t).dispatch("apply",[void 0,e])},i.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},r.try=r.fcall=function(t){return r(t).dispatch("apply",[void 0,d(arguments,1)])},i.prototype.fcall=function(){return this.dispatch("apply",[void 0,d(arguments)])},r.fbind=function(t){var e=r(t),n=d(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(d(arguments))])}},i.prototype.fbind=function(){var t=this,e=d(arguments);return function(){return t.dispatch("apply",[this,e.concat(d(arguments))])}},r.keys=function(t){return r(t).dispatch("keys",[])},i.prototype.keys=function(){return this.dispatch("keys",[])},r.all=x;function x(t){return m(t,function(e){var n=0,o=v();return T(e,function(u,c,f){var l;j(c)&&(l=c.inspect()).state==="fulfilled"?e[f]=l.value:(++n,m(c,function(s){e[f]=s,--n===0&&o.resolve(e)},o.reject,function(s){o.notify({index:f,value:s})}))},void 0),n===0&&o.resolve(e),o.promise})}i.prototype.all=function(){return x(this)},r.any=H;function H(t){if(t.length===0)return r.resolve();var e=r.defer(),n=0;return T(t,function(o,u,c){var f=t[c];n++,m(f,l,s,a);function l(p){e.resolve(p)}function s(p){if(n--,n===0){var h=p||new Error(""+p);h.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+h.message,e.reject(h)}}function a(p){e.notify({index:c,value:p})}},void 0),e.promise}i.prototype.any=function(){return H(this)},r.allResolved=ft(K,"allResolved","allSettled");function K(t){return m(t,function(e){return e=C(e,r),m(x(C(e,function(n){return m(n,U,U)})),function(){return e})})}i.prototype.allResolved=function(){return K(this)},r.allSettled=jt;function jt(t){return r(t).allSettled()}i.prototype.allSettled=function(){return this.then(function(t){return x(C(t,function(e){e=r(e);function n(){return e.inspect()}return e.then(n,n)}))})},r.fail=r.catch=function(t,e){return r(t).then(void 0,e)},i.prototype.fail=i.prototype.catch=function(t){return this.then(void 0,t)},r.progress=wt;function wt(t,e){return r(t).then(void 0,void 0,e)}i.prototype.progress=function(t){return this.then(void 0,void 0,t)},r.fin=r.finally=function(t,e){return r(t).finally(e)},i.prototype.fin=i.prototype.finally=function(t){if(!t||typeof t.apply!="function")throw new Error("Q can't apply finally callback");return t=r(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},r.done=function(t,e,n,o){return r(t).done(e,n,o)},i.prototype.done=function(t,e,n){var o=function(c){r.nextTick(function(){if($(c,u),r.onerror)r.onerror(c);else throw c})},u=t||e||n?this.then(t,e,n):this;typeof process=="object"&&process&&process.domain&&(o=process.domain.bind(o)),u.then(void 0,o)},r.timeout=function(t,e,n){return r(t).timeout(e,n)},i.prototype.timeout=function(t,e){var n=v(),o=setTimeout(function(){(!e||typeof e=="string")&&(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(u){clearTimeout(o),n.resolve(u)},function(u){clearTimeout(o),n.reject(u)},n.notify),n.promise},r.delay=function(t,e){return e===void 0&&(e=t,t=void 0),r(t).delay(e)},i.prototype.delay=function(t){return this.then(function(e){var n=v();return setTimeout(function(){n.resolve(e)},t),n.promise})},r.nfapply=function(t,e){return r(t).nfapply(e)},i.prototype.nfapply=function(t){var e=v(),n=d(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},r.nfcall=function(t){var e=d(arguments,1);return r(t).nfapply(e)},i.prototype.nfcall=function(){var t=d(arguments),e=v();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},r.nfbind=r.denodeify=function(t){if(t===void 0)throw new Error("Q can't wrap an undefined function");var e=d(arguments,1);return function(){var n=e.concat(d(arguments)),o=v();return n.push(o.makeNodeResolver()),r(t).fapply(n).fail(o.reject),o.promise}},i.prototype.nfbind=i.prototype.denodeify=function(){var t=d(arguments);return t.unshift(this),r.denodeify.apply(void 0,t)},r.nbind=function(t,e){var n=d(arguments,2);return function(){var o=n.concat(d(arguments)),u=v();o.push(u.makeNodeResolver());function c(){return t.apply(e,arguments)}return r(c).fapply(o).fail(u.reject),u.promise}},i.prototype.nbind=function(){var t=d(arguments,0);return t.unshift(this),r.nbind.apply(void 0,t)},r.nmapply=r.npost=function(t,e,n){return r(t).npost(e,n)},i.prototype.nmapply=i.prototype.npost=function(t,e){var n=d(e||[]),o=v();return n.push(o.makeNodeResolver()),this.dispatch("post",[t,n]).fail(o.reject),o.promise},r.nsend=r.nmcall=r.ninvoke=function(t,e){var n=d(arguments,2),o=v();return n.push(o.makeNodeResolver()),r(t).dispatch("post",[e,n]).fail(o.reject),o.promise},i.prototype.nsend=i.prototype.nmcall=i.prototype.ninvoke=function(t){var e=d(arguments,1),n=v();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},r.nodeify=Rt;function Rt(t,e){return r(t).nodeify(e)}i.prototype.nodeify=function(t){if(t)this.then(function(e){r.nextTick(function(){t(null,e)})},function(e){r.nextTick(function(){t(e)})});else return this},r.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var xt=V();return r})})(Tt);
